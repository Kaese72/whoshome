# Who's Home

Simple service that allows infrastructure spread out in unknown networks to call home and indicate where they are located. Should probably not be trusted, but gives an indication.

# Setup

## Server

Hosted on Kubernetes somewhere public. Requires a secret to be configured to work

> kubectl create secret generic jwt-secrets --from-literal=secret=supersecret

Then simply apply the deployment

> kubectl apply -f kustomize/deployment.yaml

## Client

The client requires a JWT token signed by the same secret as the server and a URL to report to. 
Then you just need to run the report module on the client for some time

You can get a token by running the new-token script with the admin token generated during startup of 
service

> EXPORT API_TOKEN="token generated by the server at startup"
> EXPORT API_BASE_URL="URL to access API"
> python3 -m whoshome.client new-token

Then you configure the reporter where it needs to run.

> EXPORT API_TOKEN="token received from server"
> EXPORT API_BASE_URL="URL to access API"
> python3 -m whoshome.client report
